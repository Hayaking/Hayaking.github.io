import{_ as t,V as o,W as s,X as e,$ as r,a0 as d,Z as a,y as _}from"./framework.44032428.js";const i={},c=e("h2",{id:"一、零拷贝",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#一、零拷贝","aria-hidden":"true"},"#"),a(" 一、零拷贝")],-1),l=e("h2",{id:"二、mmap",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#二、mmap","aria-hidden":"true"},"#"),a(" 二、mmap")],-1),h=e("p",null,"mmap主要用于kafka向磁盘写数据。",-1),f=e("p",null,"kafka接收到producer消息后，需要处理消息，才能落盘(网卡->内核缓冲区1(kafka进程共享)->内核缓冲区2(kafka进程共享)->磁盘)。",-1),k=e("p",null,"生产者发送数据到broker，经由一次网卡到内核缓冲区的数据拷贝，然后kafka使用mmap读取内核缓冲区的数据，然后kafka修改数据，在使用mmap将数据写到磁盘。",-1),m=e("h2",{id:"三、sendfile",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#三、sendfile","aria-hidden":"true"},"#"),a(" 三、sendfile")],-1),p=e("p",null,"consumer 从 broker 上拉取数据，使用的是 sendfile。此时数据不必再经由用户态进程处理，直接使用sendfile，将数据从磁盘->缓冲区->网卡传输。",-1);function u(B,x){const n=_("RouterLink");return o(),s("div",null,[c,e("p",null,[r(n,{to:"/knowledge/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E9%9B%B6%E6%8B%B7%E8%B4%9D.html"},{default:d(()=>[a("传送门")]),_:1}),a("，当中提到了mmap、sendfile。这两项技术在kafka中都有应用。")]),l,h,f,k,m,p])}const b=t(i,[["render",u],["__file","7.kafka与零拷贝.html.vue"]]);export{b as default};
